{% extends 'pbn/service_2/base.html' %}
{% load static %}
{% block index %}<meta name="robots" content="index, follow" />{% endblock index %}
{% block canonical %}https://{{ request.get_host }}{% endblock canonical %}
{% block content %}
    <!--  Слайдер  -->
    <section id="mainCarousel" class="carousel slide mb-5" data-bs-ride="carousel">
        <div class="carousel-inner">
            {% for slider in list_sliders %}
                <div class="carousel-item {% if slider.active %}active{% endif %}">
                    <div class="carousel-bg"
                         style="background-image:url('/media/{{ slider.preview_picture }}')"></div>
                    <div class="carousel-caption d-flex flex-column align-items-center justify-content-center text-center">
                        <h1 class="fw-bold">{{ slider.name }}</h1>
                        <p class="lead">{{ slider.text }}</p>
                        <div class="mt-3">
                            <a href="#form" class="btn btn-primary me-2">Связаться</a>
                            <a href="{{ slider.link }}" class="btn btn-outline-light">Перейти</a>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
        <!-- Стрелки -->
        <button class="carousel-control-prev"
                type="button"
                data-bs-target="#mainCarousel"
                data-bs-slide="prev">
            <span class="carousel-control-prev-icon"></span>
        </button>
        <button class="carousel-control-next"
                type="button"
                data-bs-target="#mainCarousel"
                data-bs-slide="next">
            <span class="carousel-control-next-icon"></span>
        </button>
        <!-- Индикаторы -->
        <div class="carousel-indicators">
            <button type="button"
                    data-bs-target="#mainCarousel"
                    data-bs-slide-to="0"
                    class="active"></button>
            <button type="button" data-bs-target="#mainCarousel" data-bs-slide-to="1"></button>
            <button type="button" data-bs-target="#mainCarousel" data-bs-slide-to="2"></button>
        </div>
    </section>
    {% include "pbn/service_2/include/our_service.html" %}
    <!--  SEO текст  -->
    <section class="seo mb-5">
        <div class="container">
            <div class="seo__block">
                <h2 class="section-title fw-bold text-center mb-4">{{ h1|capfirst }}</h2>
                {{ main_text|safe }}
            </div>
        </div>
    </section>
    <!--  Акции  -->
    <section class="section-services py-4 mb-4">
        <div class="container">
            <h2 class="section-title fw-bold text-center mb-4">Список акций</h2>
            <div class="row g-4 mb-4">
                {% for action in list_actions %}
                    <div class="col-12 col-sm-6 col-lg-6">
                        <article class="service-card h-100 pb-3">
                            <div class="service-thumb ratio ratio-16x9">
                                <img src="/media/{{ action.picture }}"
                                     alt="{{ action.picture }}"
                                     title="{{ action.picture }}">
                            </div>
                            <h3 class="service-title">{{ action.name }}</h3>
                            <div class="d-block text-center text-black-50 text-decoration-none">
                                <i class="bi bi-calendar-event"></i> Действует до {{ action.date_end|date:"d.m.y" }}
                            </div>
                        </article>
                    </div>
                {% endfor %}
            </div>
            <a href="{% url "services" %}"
               class="d-block text-center text-black-50 fw-bold text-decoration-none">Все услуги ➞</a>
        </div>
    </section>
    <!--  Статьи  -->
    <section class="section-articles py-5 mb-5">
        <div class="container">
            <h2 class="section-title fw-bold text-center mb-4">Статьи</h2>
            <div class="row g-4 mb-4">
                {% for article in list_articles|slice:":6" %}
                    <div class="col-12 col-md-6 col-lg-4">
                        <article class="card news-card h-100">
                            <div class="news-thumb ratio ratio-16x9">
                                <img src="/media/{{ article.img_preview }}"
                                     class="img-fluid"
                                     alt="{{ article.name }}"
                                     title="{{ article.name }}">
                            </div>
                            <div class="card-body d-flex flex-column">
                                <div class="news-date mb-2">{{ article.created|date:"d.m.y" }}</div>
                                <h3 class="news-title h4 mb-3">{{ article.name|capfirst }}</h3>
                                <span class="news-excerpt mb-4">{{ article.text_preview|safe }}</p>
                                <a href="{% url "blog" %}{{ article.category_slug }}/{{ article.slug }}/"
                                   class="btn btn-primary w-100 mt-auto">Подробнее</a>
                            </div>
                        </article>
                    </div>
                {% endfor %}
            </div>
            <a href="{% url "blog" %}"
               class="d-block text-center text-black-50 fw-bold text-decoration-none">Все статьи ➞</a>
        </div>
    </section>
    <!--  Текст + Картинка  -->
    <section class="repeater mb-5">
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <h2 class="section-title fw-bold text-center mb-4">{{ extra_subtitle|capfirst }}</h2>
                </div>
                <div class="col-md-6 order-2">
                    <div class="border ratio ratio-4x3">
                        <img src="/media/{{ extra_picture }}" />
                    </div>
                </div>
                <div class="col-md-6 order-1">{{ extra_text|safe }}</div>
            </div>
        </div>
    </section>
    <!--  Галерея  -->
    <section class="section-gallery">
        <div class="container my-5">
            <h2 class="section-title fw-bold text-center mb-4">Наши работы</h2>
            <div class="carousel-shell">
                <div id="galleryCarousel"
                     class="carousel slide"
                     data-bs-ride="carousel"
                     data-bs-interval="5000">
                    <div class="carousel-inner">
                        {% for galery in list_galery %}
                            <div class="carousel-item {% if galery.active %}active{% endif %}">
                                <div class="carousel-bg"
                                     style="background-image: url('/media/{{ galery.picture }}')"></div>
                            </div>
                        {% endfor %}
                    </div>
                    <button class="carousel-control-prev"
                            type="button"
                            data-bs-target="#galleryCarousel"
                            data-bs-slide="prev"
                            aria-label="Предыдущий слайд">
                        <span class="ctrl-wrap" aria-hidden="true">
                            <svg xmlns="http://www.w3.org/2000/svg"
                                 viewBox="0 0 16 16"
                                 width="28"
                                 height="28">
                                <path d="M10.354 1.646a.5.5 0 0 1 0 .708L5.707 7l4.647 4.646a.5.5 0 0 1-.708.708l-5-5a.5.5 0 0 1 0-.708l5-5a.5.5 0 0 1 .708 0z" fill="currentColor" />
                            </svg>
                        </span>
                        <span class="visually-hidden">Предыдущий</span>
                    </button>
                    <button class="carousel-control-next"
                            type="button"
                            data-bs-target="#galleryCarousel"
                            data-bs-slide="next"
                            aria-label="Следующий слайд">
                        <span class="ctrl-wrap" aria-hidden="true">
                            <svg xmlns="http://www.w3.org/2000/svg"
                                 viewBox="0 0 16 16"
                                 width="28"
                                 height="28">
                                <path d="M5.646 14.354a.5.5 0 0 1 0-.708L10.293 8 5.646 3.354a.5.5 0 1 1 .708-.708l5 5a.5.5 0 0 1 0 .708l-5 5a.5.5 0 0 1-.708 0z" fill="currentColor" />
                            </svg>
                        </span>
                        <span class="visually-hidden">Следующий</span>
                    </button>
                </div>
            </div>
        </div>
    </section>
{% endblock content %}
